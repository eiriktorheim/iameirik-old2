<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="element-footer.html">
<link rel="import" href="element-mywork.html">
<link rel="import" href="element-contact.html">
<link rel="import" href="shared-styles.html">

<dom-module id="element-case-page">
  <template>
    <style include="shared-styles">
      app-header-layout {
        @apply --layout-vertical;
        @apply --layout-center-center;
        padding: 0 1rem;
      }

      .space {
        padding-top: 4rem;
        padding-bottom: 1.5rem;
      }

      .half-space {
        padding: 2.5rem 0;
      }

      .default{
        width: var(--width-ml);
        margin-left: auto;
        margin-right: auto;
        text-align: center;
        padding-bottom: 5rem;
      }

      app-toolbar {
        @apply --layout-horizontal;
        @apply --layout-justified;
      }

      app-toolbar a {
        text-decoration: none;
        color: var(--tint-black);
      }

      [invisible] {
        visibility: hidden;
      }

      .half-container{
        width: 50%;
        display: inline-block;
        margin-right: -4px;
      }

      section {
        background-color: var(--tint-white);
        min-height: 10rem;
        /*max-width: var(--width-medium);*/
        margin: 0 auto;
        padding-top: 1.5rem;
      }

      section.everynthchild {
        background-color: var(--tint-very-light-grey);
      }

      .fakeimg {
        height: 25rem;
        width: 100%;
        background-color: var(--tint-medium-grey);
      }

 

      h1 {
        margin-bottom: 1rem;
      }

      h2 {
        margin-top: 2rem;
        color:white;
      }

      h3 {
        margin-top: 2rem;
      }

      h4 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
      }

      span{
        font-size: var(--txt-s);
        color: var(--tint-black);
      }

      .roleandtime{
        font-style: italic;
      }

      .timeline-step{
        position: relative;
        width: 2px;
        background-color: #f0f0f0;
        margin: 0 auto;
        margin-bottom: -2rem;
      }

      .step-container {
      position: relative;
        left: 100px;
        bottom: 0;
        width: 300px;
      }

      img,video{
        margin-top: 2rem;
        margin-bottom: 2rem;
      }

      .step-container-right {
        text-align: left;
      }

      .step-container-left {
        left: -400px;
        text-align: right;
      }

      .step-container-left:before {
          left: 324px;
          content: "";
          position: absolute;
          top: 146px;
          width: 60px;
          height: 2px;
          background: #f0f0f0;
      }

      .step-container-right:before {
          left: -80px;
          content: "";
          position: absolute;
          top: 146px;
          width: 60px;
          height: 2px;
          background: #f0f0f0;
      }

      .timeline-step:after {
          content: "";
          position: absolute;
          transition: all .2s ease;
          left: 50%;
          transform: translateX(-50%);
          width: 8px;
          height: 8px;
          border-radius: 50%;
          top: 133px;
          border: 10px solid #fff;
          background: var(--tint-primary);
      }

      ul{
        margin-bottom: 6rem;
      }

      li{
        list-style: none;
      }

      .grid {
        display: grid;
        grid-gap: 1rem;
        grid-auto-rows: minmax(5rem, auto);
        margin-top: 1rem;
      }

      @media (max-width: 599px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }



      }

      @media (min-width: 600px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 900px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      .cta-case{
        height: 14rem;
        background-color: var(--tint-white);
      }

      .cta{
        background-color: var(--tint-light-grey);
      }

      .bottom-nav{
        background-color: var(--tint-very-dark-grey);
        color: white;
        padding: 1rem 0;
      }

      .nav-items{
        @apply --layout-horizontal;
        @apply --layout-justified;
      }

      .nav-item, .nav-item a, .nav-item span{
        color: white;
        text-decoration: none;
      }

      .hero-image {
        min-height: 100vh;
        width: 100%;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        position: absolute;
        z-index: -100;
      }


      #summery{
        grid-column-start: 1;
        grid-column-end: span col4-start;
        grid-row-start: 2
        grid-row-end: span 2
      }

      .summery{
        font-size: 1rem;
      }

      .sideproject {
        max-width: 55rem;
        height: 22rem;
        margin-bottom: 6rem;
        display: grid;
        grid-auto-rows: minmax(5rem, auto);
        margin-top: 1rem;
        background-color: var(--tint-light-grey);
      }



      .sideproject-info{
        padding: 1rem 2rem;

      }



      @media (max-width: 599px) {
        .imgcover{
          width: 100%;
          height: 22rem;
           object-fit: cover;
        }
        .sideproject-illustration{
          width: 100%;
          height: 22rem;
        }

        .sideproject {
          grid-template-columns: 1fr;
        }
      }

      @media (min-width: 600px) {
        .imgcover{
          width: 15rem;
          height: 15rem;
          object-fit: cover;
        }
        .sideproject {
          grid-template-columns: 15rem 1fr;
        max-width: 40rem;
        height: 22rem;
        }
      }

      @media (min-width: 900px) {

      .sideproject-illustration{
        object-fit: cover;

      }

          .imgcover{
            width: 22rem;
            height: 22rem;
            object-fit: cover;
          }

        .sideproject {
          grid-template-columns: 22rem 1fr;
          max-width: 55rem;
          height: 22rem;
        }
      }

    </style>


    <style is="custom-style" include="iron-flex iron-flex-alignment"></style>
    
    <div class="hero-image" style$="background-image: url('[[project.hero]]');"></div>

    <app-header-layout>
      <app-header effects="waterfall" slot="header">
        <app-toolbar>
          <a href="/" style="color:white;" on-click="backtoFront">
            <paper-icon-button icon="arrow-back"></paper-icon-button>
            <span class="sans-serif" style="color:white;">Back to front</span>
          </a>
          <a href="case/[[_nextUrl(project)]]" style="color:white;" invisible$="[[_shouldHideNext(project)]]">
            <span class="sans-serif" style="color:white;">Next case</span>
            <paper-icon-button icon="arrow-forward"></paper-icon-button>
          </a>
        </app-toolbar>
      </app-header>
    </app-header-layout>

    <div class="mediumlarge center-text center space">
      <h2>[[project.title]]</h2>
      <p id="subtitle" style="margin: 1rem 0; color:white;"></p>
    </div>

    <div id="visual" class="project-image full center"></div>

    <div id="body"></div>



        <div class="full cta">
            <element-mywork></element-mywork>
        </div>


        <div class="bottom-nav full">
          <div class="nav-items">
            <div class="nav-item">
              <a href="/" on-click="backtoFront">
                <paper-icon-button icon="arrow-back"></paper-icon-button>
                <span class="sans-serif">Back to front</span>
              </a>
            </div>
            <div class="nav-item">
              <a href="case/[[_nextUrl(project)]]" invisible$="[[_shouldHideNext(project)]]">
                <span class="sans-serif">Next case</span>
                <paper-icon-button icon="arrow-forward"></paper-icon-button>
              </a>
            </div>
          </div>
        </div>


    <element-footer></element-footer>


  </template>

  <script>

    class ElementCasePage extends Polymer.Element {
      static get is() {
        return 'element-case-page';
      }

      static get properties() {
        return {
          project: Object
        }
      }

      static get observers() {
        return [
          '_setSubtitle(project.subtitle)',
          '_setVisual(project.mainVisual)',
          '_setBody(project.body)'
        ];
      }


      backtoFront() {
        Polymer.AppLayout.scroll({top: 1000, behavior: 'smooth'});
      }

      _shouldHidePrevious() {
        if (!this.project.previous)
          return true;
      }

      _previousUrl() {
        return this.project.previous;
      }

      _shouldHideNext() {
        if (!this.project.next)
          return true;
      }

      _nextUrl() {
        return this.project.next;
      }

      _setSubtitle(subtitle) {
        this.$.subtitle.innerHTML = subtitle;
      }

      _setVisual(visual) {
        this.$.visual.innerHTML = visual;
      }

      _setBody(body) {
        this.$.body.innerHTML = body;
      }

      _nextCase(e) {
        // Wait for ripple to finish.
        e.target.addEventListener('transitionend', e => {
          location.href = 'case/' + this.project.next;
        });
      }
    }

    window.customElements.define(ElementCasePage.is, ElementCasePage);

  </script>
</dom-module>